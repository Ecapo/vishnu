\hypertarget{classMetricServer}{
\section{MetricServer Class Reference}
\label{classMetricServer}\index{MetricServer@{MetricServer}}
}


Server that link the metrics and the database.  




{\ttfamily \#include $<$MetricServer.hpp$>$}

\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classMetricServer_a3e5fe73716340b9387c04834da9fe47e}{MetricServer} (const \hyperlink{classUserServer}{UserServer} session, string mail)
\begin{DoxyCompactList}\small\item\em Constructor. \item\end{DoxyCompactList}\item 
\hyperlink{classMetricServer_af0f9afbf41bb0fdc3ba06cfcb54b1ea9}{MetricServer} (const \hyperlink{classUserServer}{UserServer} session, IMS\_\-Data::MetricHistOp\_\-ptr op, string mail)
\begin{DoxyCompactList}\small\item\em Constructor. \item\end{DoxyCompactList}\item 
\hyperlink{classMetricServer_a8f865d6adad34eef1d094c8696c12ff9}{MetricServer} (const \hyperlink{classUserServer}{UserServer} session, IMS\_\-Data::CurMetricOp\_\-ptr op, string mail)
\begin{DoxyCompactList}\small\item\em Constructor. \item\end{DoxyCompactList}\item 
\hypertarget{classMetricServer_a5e4b923c808aa83fe3eb24c06cd0bfd5}{
\hyperlink{classMetricServer_a5e4b923c808aa83fe3eb24c06cd0bfd5}{$\sim$MetricServer} ()}
\label{classMetricServer_a5e4b923c808aa83fe3eb24c06cd0bfd5}

\begin{DoxyCompactList}\small\item\em Destructor. \item\end{DoxyCompactList}\item 
void \hyperlink{classMetricServer_adfea7bbb8ea22a861bf6f7652075f35b}{setUpFreq} (int freq)
\begin{DoxyCompactList}\small\item\em To set the update frequency value. \item\end{DoxyCompactList}\item 
unsigned int \hyperlink{classMetricServer_ae6f1cc4eda630823029dc6161f5bcd3e}{checkUpFreq} ()
\begin{DoxyCompactList}\small\item\em Update the mfreq member with the value from the database. \item\end{DoxyCompactList}\item 
IMS\_\-Data::ListMetric $\ast$ \hyperlink{classMetricServer_a0daa76199b933f12617c7088ef1295e8}{getCurMet} ()
\begin{DoxyCompactList}\small\item\em Return the current metric values, gotten directly with CoRI. \item\end{DoxyCompactList}\item 
IMS\_\-Data::ListMetric $\ast$ \hyperlink{classMetricServer_afcb928edb891800c34a5fda3cae4abe3}{getHistMet} (string machineId)
\begin{DoxyCompactList}\small\item\em Return the old values of the metrics, gotten from the database. \item\end{DoxyCompactList}\item 
void \hyperlink{classMetricServer_ad84b869bee5b7d1890c54fbf778b0ee1}{addMetricSet} (IMS\_\-Data::ListMetric $\ast$set, string mid)
\begin{DoxyCompactList}\small\item\em To add all the monitored types of metric in the database at a time t. \item\end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classMetricServer_a4163ec4b6d279051877af2d3694151f6}{sendMail} (int val, int threshold, int type, string email, string uid, string mid)
\begin{DoxyCompactList}\small\item\em To send a mail. \item\end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classMetricServer_ab9dca4ec325377cc4d321593270503f6}{
int \hyperlink{classMetricServer_ab9dca4ec325377cc4d321593270503f6}{mvishnuId}}
\label{classMetricServer_ab9dca4ec325377cc4d321593270503f6}

\begin{DoxyCompactList}\small\item\em The id of vishnu. \item\end{DoxyCompactList}\item 
\hypertarget{classMetricServer_a67293741ee3b694ec80f64b22bd9c6f6}{
unsigned int \hyperlink{classMetricServer_a67293741ee3b694ec80f64b22bd9c6f6}{mfreq}}
\label{classMetricServer_a67293741ee3b694ec80f64b22bd9c6f6}

\begin{DoxyCompactList}\small\item\em The update frequency. \item\end{DoxyCompactList}\item 
\hypertarget{classMetricServer_a596d3c6503faded40a2044d8153bbadf}{
\hyperlink{classUserServer}{UserServer} \hyperlink{classMetricServer_a596d3c6503faded40a2044d8153bbadf}{msession}}
\label{classMetricServer_a596d3c6503faded40a2044d8153bbadf}

\begin{DoxyCompactList}\small\item\em The session. \item\end{DoxyCompactList}\item 
\hypertarget{classMetricServer_a4e2697db18d56af0835fc3127d1721bb}{
\hyperlink{classDatabase}{Database} $\ast$ \hyperlink{classMetricServer_a4e2697db18d56af0835fc3127d1721bb}{mdatabase}}
\label{classMetricServer_a4e2697db18d56af0835fc3127d1721bb}

\begin{DoxyCompactList}\small\item\em An instance of vishnu database. \item\end{DoxyCompactList}\item 
\hypertarget{classMetricServer_a4a164a4df5b93ecb463e6954ad42604a}{
string \hyperlink{classMetricServer_a4a164a4df5b93ecb463e6954ad42604a}{mcommandName}}
\label{classMetricServer_a4a164a4df5b93ecb463e6954ad42604a}

\begin{DoxyCompactList}\small\item\em The name of the command. \item\end{DoxyCompactList}\item 
\hypertarget{classMetricServer_acfea52dcaac1a2274bb56e0222cd83c2}{
string \hyperlink{classMetricServer_acfea52dcaac1a2274bb56e0222cd83c2}{msendmail}}
\label{classMetricServer_acfea52dcaac1a2274bb56e0222cd83c2}

\begin{DoxyCompactList}\small\item\em The process to send mails. \item\end{DoxyCompactList}\item 
\hypertarget{classMetricServer_a372f304ae22a86e89a98bc6da42c52a5}{
IMS\_\-Data::MetricHistOp\_\-ptr \hyperlink{classMetricServer_a372f304ae22a86e89a98bc6da42c52a5}{mhop}}
\label{classMetricServer_a372f304ae22a86e89a98bc6da42c52a5}

\begin{DoxyCompactList}\small\item\em The options for the history of metrics. \item\end{DoxyCompactList}\item 
\hypertarget{classMetricServer_aa2af076810d220c2c25729f4fb0e20ab}{
IMS\_\-Data::CurMetricOp\_\-ptr \hyperlink{classMetricServer_aa2af076810d220c2c25729f4fb0e20ab}{mcop}}
\label{classMetricServer_aa2af076810d220c2c25729f4fb0e20ab}

\begin{DoxyCompactList}\small\item\em The options for the current metrics. \item\end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Static Private Attributes}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classMetricServer_ab3238a6f396163a1cc5b8cdf79aa4c85}{
static const int \hyperlink{classMetricServer_ab3238a6f396163a1cc5b8cdf79aa4c85}{FREQPOS} = 1}
\label{classMetricServer_ab3238a6f396163a1cc5b8cdf79aa4c85}

\begin{DoxyCompactList}\small\item\em The position of the frequency in the vishnu table. \item\end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Server that link the metrics and the database. 

\subsection{Constructor \& Destructor Documentation}
\hypertarget{classMetricServer_a3e5fe73716340b9387c04834da9fe47e}{
\index{MetricServer@{MetricServer}!MetricServer@{MetricServer}}
\index{MetricServer@{MetricServer}!MetricServer@{MetricServer}}
\subsubsection[{MetricServer}]{\setlength{\rightskip}{0pt plus 5cm}MetricServer::MetricServer (
\begin{DoxyParamCaption}
\item[{const {\bf UserServer}}]{ session, }
\item[{string}]{ mail}
\end{DoxyParamCaption}
)}}
\label{classMetricServer_a3e5fe73716340b9387c04834da9fe47e}


Constructor. 


\begin{DoxyParams}{Parameters}
\item[{\em session,:}]A session to use for the call \item[{\em mail,:}]The script to send mails \end{DoxyParams}
\hypertarget{classMetricServer_af0f9afbf41bb0fdc3ba06cfcb54b1ea9}{
\index{MetricServer@{MetricServer}!MetricServer@{MetricServer}}
\index{MetricServer@{MetricServer}!MetricServer@{MetricServer}}
\subsubsection[{MetricServer}]{\setlength{\rightskip}{0pt plus 5cm}MetricServer::MetricServer (
\begin{DoxyParamCaption}
\item[{const {\bf UserServer}}]{ session, }
\item[{IMS\_\-Data::MetricHistOp\_\-ptr}]{ op, }
\item[{string}]{ mail}
\end{DoxyParamCaption}
)}}
\label{classMetricServer_af0f9afbf41bb0fdc3ba06cfcb54b1ea9}


Constructor. 


\begin{DoxyParams}{Parameters}
\item[{\em session,:}]A session to use for the call \item[{\em op,:}]\hyperlink{classOptions}{Options} for the get metric history call \item[{\em mail,:}]The script to send mails \end{DoxyParams}
\hypertarget{classMetricServer_a8f865d6adad34eef1d094c8696c12ff9}{
\index{MetricServer@{MetricServer}!MetricServer@{MetricServer}}
\index{MetricServer@{MetricServer}!MetricServer@{MetricServer}}
\subsubsection[{MetricServer}]{\setlength{\rightskip}{0pt plus 5cm}MetricServer::MetricServer (
\begin{DoxyParamCaption}
\item[{const {\bf UserServer}}]{ session, }
\item[{IMS\_\-Data::CurMetricOp\_\-ptr}]{ op, }
\item[{string}]{ mail}
\end{DoxyParamCaption}
)}}
\label{classMetricServer_a8f865d6adad34eef1d094c8696c12ff9}


Constructor. 


\begin{DoxyParams}{Parameters}
\item[{\em session,:}]A session to use for the call \item[{\em op,:}]\hyperlink{classOptions}{Options} for the get current metric value call \item[{\em mail,:}]The script to send mails \end{DoxyParams}


\subsection{Member Function Documentation}
\hypertarget{classMetricServer_ad84b869bee5b7d1890c54fbf778b0ee1}{
\index{MetricServer@{MetricServer}!addMetricSet@{addMetricSet}}
\index{addMetricSet@{addMetricSet}!MetricServer@{MetricServer}}
\subsubsection[{addMetricSet}]{\setlength{\rightskip}{0pt plus 5cm}void MetricServer::addMetricSet (
\begin{DoxyParamCaption}
\item[{IMS\_\-Data::ListMetric $\ast$}]{ set, }
\item[{string}]{ mid}
\end{DoxyParamCaption}
)}}
\label{classMetricServer_ad84b869bee5b7d1890c54fbf778b0ee1}


To add all the monitored types of metric in the database at a time t. 


\begin{DoxyParams}{Parameters}
\item[{\em set,:}]A list containing the monitored \item[{\em mid,:}]The machine id of the machine to add the set \end{DoxyParams}
\hypertarget{classMetricServer_ae6f1cc4eda630823029dc6161f5bcd3e}{
\index{MetricServer@{MetricServer}!checkUpFreq@{checkUpFreq}}
\index{checkUpFreq@{checkUpFreq}!MetricServer@{MetricServer}}
\subsubsection[{checkUpFreq}]{\setlength{\rightskip}{0pt plus 5cm}unsigned int MetricServer::checkUpFreq (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}
\label{classMetricServer_ae6f1cc4eda630823029dc6161f5bcd3e}


Update the mfreq member with the value from the database. 

\begin{DoxyReturn}{Returns}
The new mfreq value 
\end{DoxyReturn}
\hypertarget{classMetricServer_a0daa76199b933f12617c7088ef1295e8}{
\index{MetricServer@{MetricServer}!getCurMet@{getCurMet}}
\index{getCurMet@{getCurMet}!MetricServer@{MetricServer}}
\subsubsection[{getCurMet}]{\setlength{\rightskip}{0pt plus 5cm}IMS\_\-Data::ListMetric$\ast$ MetricServer::getCurMet (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}
\label{classMetricServer_a0daa76199b933f12617c7088ef1295e8}


Return the current metric values, gotten directly with CoRI. 

\begin{DoxyReturn}{Returns}
The current list of metrics 
\end{DoxyReturn}
\hypertarget{classMetricServer_afcb928edb891800c34a5fda3cae4abe3}{
\index{MetricServer@{MetricServer}!getHistMet@{getHistMet}}
\index{getHistMet@{getHistMet}!MetricServer@{MetricServer}}
\subsubsection[{getHistMet}]{\setlength{\rightskip}{0pt plus 5cm}IMS\_\-Data::ListMetric$\ast$ MetricServer::getHistMet (
\begin{DoxyParamCaption}
\item[{string}]{ machineId}
\end{DoxyParamCaption}
)}}
\label{classMetricServer_afcb928edb891800c34a5fda3cae4abe3}


Return the old values of the metrics, gotten from the database. 

\begin{DoxyReturn}{Returns}
The old list of metrics 
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
\item[{\em machineId,:}]The vishnu id of the machine \end{DoxyParams}
\hypertarget{classMetricServer_a4163ec4b6d279051877af2d3694151f6}{
\index{MetricServer@{MetricServer}!sendMail@{sendMail}}
\index{sendMail@{sendMail}!MetricServer@{MetricServer}}
\subsubsection[{sendMail}]{\setlength{\rightskip}{0pt plus 5cm}void MetricServer::sendMail (
\begin{DoxyParamCaption}
\item[{int}]{ val, }
\item[{int}]{ threshold, }
\item[{int}]{ type, }
\item[{string}]{ email, }
\item[{string}]{ uid, }
\item[{string}]{ mid}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classMetricServer_a4163ec4b6d279051877af2d3694151f6}


To send a mail. 


\begin{DoxyParams}{Parameters}
\item[{\em val,:}]The value of the metric \item[{\em threshold,:}]The value of the threshold \item[{\em type,:}]The type of the threshold \item[{\em email,:}]The email adress \item[{\em uid,:}]The user id of the user target \item[{\em mid,:}]The machine id of the machine where the threshold is reached \end{DoxyParams}
\hypertarget{classMetricServer_adfea7bbb8ea22a861bf6f7652075f35b}{
\index{MetricServer@{MetricServer}!setUpFreq@{setUpFreq}}
\index{setUpFreq@{setUpFreq}!MetricServer@{MetricServer}}
\subsubsection[{setUpFreq}]{\setlength{\rightskip}{0pt plus 5cm}void MetricServer::setUpFreq (
\begin{DoxyParamCaption}
\item[{int}]{ freq}
\end{DoxyParamCaption}
)}}
\label{classMetricServer_adfea7bbb8ea22a861bf6f7652075f35b}


To set the update frequency value. 


\begin{DoxyParams}{Parameters}
\item[{\em freq,:}]The new frequency value \end{DoxyParams}


The documentation for this class was generated from the following file:\begin{DoxyCompactItemize}
\item 
IMS/src/server/data/\hyperlink{MetricServer_8hpp}{MetricServer.hpp}\end{DoxyCompactItemize}
