\hypertarget{classLSFServer}{
\section{LSFServer Class Reference}
\label{classLSFServer}\index{LSFServer@{LSFServer}}
}


\hyperlink{classLSFServer}{LSFServer} class implementation.  




{\ttfamily \#include $<$LSFServer.hpp$>$}

Inheritance diagram for LSFServer:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classLSFServer}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classLSFServer_a8dffbaec82d90ed07015822f4e04f0f5}{
\hyperlink{classLSFServer_a8dffbaec82d90ed07015822f4e04f0f5}{LSFServer} ()}
\label{classLSFServer_a8dffbaec82d90ed07015822f4e04f0f5}

\begin{DoxyCompactList}\small\item\em Constructor. \item\end{DoxyCompactList}\item 
int \hyperlink{classLSFServer_a2e8c4df4101e12dded11fa20faa994f1}{submit} (const char $\ast$scriptPath, const TMS\_\-Data::SubmitOptions \&options, TMS\_\-Data::Job \&job, char $\ast$$\ast$envp=NULL)
\begin{DoxyCompactList}\small\item\em Function to submit LSF job. \item\end{DoxyCompactList}\item 
int \hyperlink{classLSFServer_a878231ec54cb12d7ffaf58586c6c8e13}{cancel} (const char $\ast$jobId)
\begin{DoxyCompactList}\small\item\em Function to cancel job. \item\end{DoxyCompactList}\item 
int \hyperlink{classLSFServer_ad6ad00defcea4be1f680b05c75fe7b2e}{getJobState} (const std::string \&jobId)
\begin{DoxyCompactList}\small\item\em Function to get the status of the job. \item\end{DoxyCompactList}\item 
time\_\-t \hyperlink{classLSFServer_ad8ae2df6193db77a2aaa56b2322150e6}{getJobStartTime} (const std::string \&jobId)
\begin{DoxyCompactList}\small\item\em Function to get the start time of the job. \item\end{DoxyCompactList}\item 
TMS\_\-Data::ListQueues $\ast$ \hyperlink{classLSFServer_a8dc6b7ad5db30b51fafdd3f40466324c}{listQueues} (const std::string \&optQueueName=std::string())
\begin{DoxyCompactList}\small\item\em Function to request the status of queues. \item\end{DoxyCompactList}\item 
void \hyperlink{classLSFServer_a6ebc0d1089607660aed8912e83484934}{fillListOfJobs} (TMS\_\-Data::ListJobs $\ast$\&listOfJobs, const std::vector$<$ string $>$ \&ignoredIds=std::vector$<$ string $>$())
\begin{DoxyCompactList}\small\item\em Function to get a list of submitted jobs. \item\end{DoxyCompactList}\item 
\hypertarget{classLSFServer_ab7a83000304edcf48a8442f01bbd428a}{
\hyperlink{classLSFServer_ab7a83000304edcf48a8442f01bbd428a}{$\sim$LSFServer} ()}
\label{classLSFServer_ab7a83000304edcf48a8442f01bbd428a}

\begin{DoxyCompactList}\small\item\em Destructor. \item\end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classLSFServer_a2c772126004cc986ac63b9bc90c94889}{processOptions} (const char $\ast$scriptPath, const TMS\_\-Data::SubmitOptions \&options, struct submit $\ast$req)
\begin{DoxyCompactList}\small\item\em Function to treat the submission options. \item\end{DoxyCompactList}\item 
int \hyperlink{classLSFServer_a23f1ca41a10204e34f9c507a9db10c21}{convertLSFStateToVishnuState} (const unsigned int \&state)
\begin{DoxyCompactList}\small\item\em Function to convert the LSF state into VISHNU state. \item\end{DoxyCompactList}\item 
int \hyperlink{classLSFServer_ad46f252c5f4f1a4413951365137e3b7f}{convertLSFPrioToVishnuPrio} (const uint32\_\-t \&prio)
\begin{DoxyCompactList}\small\item\em Function to convert the LSF priority into VISHNU priority. \item\end{DoxyCompactList}\item 
void \hyperlink{classLSFServer_a136de918eee609feb038d90de88d2a50}{fillJobInfo} (TMS\_\-Data::Job \&job, struct jobInfoEnt $\ast$jobInfo)
\begin{DoxyCompactList}\small\item\em Function To fill the info concerning a job. \item\end{DoxyCompactList}\item 
LS\_\-LONG\_\-INT \hyperlink{classLSFServer_a7e1f305914ec1222cf23efad1da5cfc1}{convertToLSFJobId} (const std::string \&jobId)
\begin{DoxyCompactList}\small\item\em Function To convert vishnu job Id to LSF job Id. \item\end{DoxyCompactList}\item 
void \hyperlink{classLSFServer_acd9e28377eeeef5b5bb89b4820ffcbbc}{replaceSymbolInToJobPath} (std::string \&path)
\begin{DoxyCompactList}\small\item\em Function to replace LSF job identifer symbol by its real value in to a path. \item\end{DoxyCompactList}\item 
bool \hyperlink{classLSFServer_aa277639799cd8dd06cb51364a2634b95}{containsAnExcludedLSFSymbols} (const std::string \&path, std::string \&symbol)
\begin{DoxyCompactList}\small\item\em Function to cheick if a path contains an excluded LSF symbol by vishnu. \item\end{DoxyCompactList}\item 
std::string \hyperlink{classLSFServer_aba94136a5106cbd2dbf5759568cd576f}{checkLSFOutPutPath} (char $\ast$\&path, const std::string \&pathInfo=\char`\"{}job output path\char`\"{})
\begin{DoxyCompactList}\small\item\em Function to check if LSF path syntax is correct. \item\end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classLSFServer_a9b30661795410d99d1856e64fc2b44fa}{
TMS\_\-Data::ListQueues\_\-ptr \hyperlink{classLSFServer_a9b30661795410d99d1856e64fc2b44fa}{mlistQueues}}
\label{classLSFServer_a9b30661795410d99d1856e64fc2b44fa}

\begin{DoxyCompactList}\small\item\em ListQueues returned. \item\end{DoxyCompactList}\item 
\hypertarget{classLSFServer_aba0998934a0fe71d22b3eb0497234134}{
std::map$<$ std::string, std::string $>$ \hyperlink{classLSFServer_aba0998934a0fe71d22b3eb0497234134}{msymbolMap}}
\label{classLSFServer_aba0998934a0fe71d22b3eb0497234134}

\begin{DoxyCompactList}\small\item\em msymbolMap contains the LSF partern symbols of job output and error path \item\end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
\hyperlink{classLSFServer}{LSFServer} class implementation. 

\subsection{Member Function Documentation}
\hypertarget{classLSFServer_a878231ec54cb12d7ffaf58586c6c8e13}{
\index{LSFServer@{LSFServer}!cancel@{cancel}}
\index{cancel@{cancel}!LSFServer@{LSFServer}}
\subsubsection[{cancel}]{\setlength{\rightskip}{0pt plus 5cm}int LSFServer::cancel (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{ jobId}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classLSFServer_a878231ec54cb12d7ffaf58586c6c8e13}


Function to cancel job. 


\begin{DoxyParams}{Parameters}
\item[{\em jobId}]the identifier of the job to cancel \end{DoxyParams}
\begin{DoxyReturn}{Returns}
raises an exception on error 
\end{DoxyReturn}


Implements \hyperlink{classBatchServer_af40bbd83fa2bd1f1720e29800227cdb0}{BatchServer}.

\hypertarget{classLSFServer_aba94136a5106cbd2dbf5759568cd576f}{
\index{LSFServer@{LSFServer}!checkLSFOutPutPath@{checkLSFOutPutPath}}
\index{checkLSFOutPutPath@{checkLSFOutPutPath}!LSFServer@{LSFServer}}
\subsubsection[{checkLSFOutPutPath}]{\setlength{\rightskip}{0pt plus 5cm}std::string LSFServer::checkLSFOutPutPath (
\begin{DoxyParamCaption}
\item[{char $\ast$\&}]{ path, }
\item[{const std::string \&}]{ pathInfo = {\ttfamily \char`\"{}job~output~path\char`\"{}}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classLSFServer_aba94136a5106cbd2dbf5759568cd576f}


Function to check if LSF path syntax is correct. 


\begin{DoxyParams}{Parameters}
\item[{\em path}]the path to check \item[{\em pathInfo}]The information on path to print \end{DoxyParams}
\begin{DoxyReturn}{Returns}
an error message 
\end{DoxyReturn}
\hypertarget{classLSFServer_aa277639799cd8dd06cb51364a2634b95}{
\index{LSFServer@{LSFServer}!containsAnExcludedLSFSymbols@{containsAnExcludedLSFSymbols}}
\index{containsAnExcludedLSFSymbols@{containsAnExcludedLSFSymbols}!LSFServer@{LSFServer}}
\subsubsection[{containsAnExcludedLSFSymbols}]{\setlength{\rightskip}{0pt plus 5cm}bool LSFServer::containsAnExcludedLSFSymbols (
\begin{DoxyParamCaption}
\item[{const std::string \&}]{ path, }
\item[{std::string \&}]{ symbol}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classLSFServer_aa277639799cd8dd06cb51364a2634b95}


Function to cheick if a path contains an excluded LSF symbol by vishnu. 


\begin{DoxyParams}{Parameters}
\item[{\em path}]The path to check \item[{\em symbol}]The excluded symbol \end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if the path contain an exlude symbol 
\end{DoxyReturn}
\hypertarget{classLSFServer_ad46f252c5f4f1a4413951365137e3b7f}{
\index{LSFServer@{LSFServer}!convertLSFPrioToVishnuPrio@{convertLSFPrioToVishnuPrio}}
\index{convertLSFPrioToVishnuPrio@{convertLSFPrioToVishnuPrio}!LSFServer@{LSFServer}}
\subsubsection[{convertLSFPrioToVishnuPrio}]{\setlength{\rightskip}{0pt plus 5cm}int LSFServer::convertLSFPrioToVishnuPrio (
\begin{DoxyParamCaption}
\item[{const uint32\_\-t \&}]{ prio}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classLSFServer_ad46f252c5f4f1a4413951365137e3b7f}


Function to convert the LSF priority into VISHNU priority. 


\begin{DoxyParams}{Parameters}
\item[{\em prio}]the priority to convert \end{DoxyParams}
\begin{DoxyReturn}{Returns}
VISHNU state 
\end{DoxyReturn}
\hypertarget{classLSFServer_a23f1ca41a10204e34f9c507a9db10c21}{
\index{LSFServer@{LSFServer}!convertLSFStateToVishnuState@{convertLSFStateToVishnuState}}
\index{convertLSFStateToVishnuState@{convertLSFStateToVishnuState}!LSFServer@{LSFServer}}
\subsubsection[{convertLSFStateToVishnuState}]{\setlength{\rightskip}{0pt plus 5cm}int LSFServer::convertLSFStateToVishnuState (
\begin{DoxyParamCaption}
\item[{const unsigned int \&}]{ state}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classLSFServer_a23f1ca41a10204e34f9c507a9db10c21}


Function to convert the LSF state into VISHNU state. 


\begin{DoxyParams}{Parameters}
\item[{\em state}]the state to convert \end{DoxyParams}
\begin{DoxyReturn}{Returns}
VISHNU state 
\end{DoxyReturn}
\hypertarget{classLSFServer_a7e1f305914ec1222cf23efad1da5cfc1}{
\index{LSFServer@{LSFServer}!convertToLSFJobId@{convertToLSFJobId}}
\index{convertToLSFJobId@{convertToLSFJobId}!LSFServer@{LSFServer}}
\subsubsection[{convertToLSFJobId}]{\setlength{\rightskip}{0pt plus 5cm}LS\_\-LONG\_\-INT LSFServer::convertToLSFJobId (
\begin{DoxyParamCaption}
\item[{const std::string \&}]{ jobId}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classLSFServer_a7e1f305914ec1222cf23efad1da5cfc1}


Function To convert vishnu job Id to LSF job Id. 


\begin{DoxyParams}{Parameters}
\item[{\em jobId,:}]vishnu job Id \end{DoxyParams}
\begin{DoxyReturn}{Returns}
the converted LSF job id 
\end{DoxyReturn}
\hypertarget{classLSFServer_a136de918eee609feb038d90de88d2a50}{
\index{LSFServer@{LSFServer}!fillJobInfo@{fillJobInfo}}
\index{fillJobInfo@{fillJobInfo}!LSFServer@{LSFServer}}
\subsubsection[{fillJobInfo}]{\setlength{\rightskip}{0pt plus 5cm}void LSFServer::fillJobInfo (
\begin{DoxyParamCaption}
\item[{TMS\_\-Data::Job \&}]{ job, }
\item[{struct jobInfoEnt $\ast$}]{ jobInfo}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classLSFServer_a136de918eee609feb038d90de88d2a50}


Function To fill the info concerning a job. 


\begin{DoxyParams}{Parameters}
\item[{\em job,:}]The job to fill \item[{\em jobInfo,:}]The LSF job structure information \end{DoxyParams}
\hypertarget{classLSFServer_a6ebc0d1089607660aed8912e83484934}{
\index{LSFServer@{LSFServer}!fillListOfJobs@{fillListOfJobs}}
\index{fillListOfJobs@{fillListOfJobs}!LSFServer@{LSFServer}}
\subsubsection[{fillListOfJobs}]{\setlength{\rightskip}{0pt plus 5cm}void LSFServer::fillListOfJobs (
\begin{DoxyParamCaption}
\item[{TMS\_\-Data::ListJobs $\ast$\&}]{ listOfJobs, }
\item[{const std::vector$<$ string $>$ \&}]{ ignoredIds = {\ttfamily std::vector$<$~string~$>$()}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classLSFServer_a6ebc0d1089607660aed8912e83484934}


Function to get a list of submitted jobs. 


\begin{DoxyParams}{Parameters}
\item[{\em listOfJobs}]the ListJobs structure to fill \item[{\em ignoredIds}]the list of job ids to ignore \end{DoxyParams}


Implements \hyperlink{classBatchServer_ab5f0adb84f7b7e22e78d7a4a45679efd}{BatchServer}.

\hypertarget{classLSFServer_ad8ae2df6193db77a2aaa56b2322150e6}{
\index{LSFServer@{LSFServer}!getJobStartTime@{getJobStartTime}}
\index{getJobStartTime@{getJobStartTime}!LSFServer@{LSFServer}}
\subsubsection[{getJobStartTime}]{\setlength{\rightskip}{0pt plus 5cm}time\_\-t LSFServer::getJobStartTime (
\begin{DoxyParamCaption}
\item[{const std::string \&}]{ jobId}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classLSFServer_ad8ae2df6193db77a2aaa56b2322150e6}


Function to get the start time of the job. 


\begin{DoxyParams}{Parameters}
\item[{\em jobId}]the identifier of the job \end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if the job is unknown 
\end{DoxyReturn}


Implements \hyperlink{classBatchServer_aa43eebf4a61d0d61646b7595630d2ef1}{BatchServer}.

\hypertarget{classLSFServer_ad6ad00defcea4be1f680b05c75fe7b2e}{
\index{LSFServer@{LSFServer}!getJobState@{getJobState}}
\index{getJobState@{getJobState}!LSFServer@{LSFServer}}
\subsubsection[{getJobState}]{\setlength{\rightskip}{0pt plus 5cm}int LSFServer::getJobState (
\begin{DoxyParamCaption}
\item[{const std::string \&}]{ jobId}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classLSFServer_ad6ad00defcea4be1f680b05c75fe7b2e}


Function to get the status of the job. 


\begin{DoxyParams}{Parameters}
\item[{\em jobId}]the identifier of the job \end{DoxyParams}
\begin{DoxyReturn}{Returns}
-\/1 if the job is unknown or server not unavailable 
\end{DoxyReturn}


Implements \hyperlink{classBatchServer_ac82e407645e4ad185cf59edcee832d58}{BatchServer}.

\hypertarget{classLSFServer_a8dc6b7ad5db30b51fafdd3f40466324c}{
\index{LSFServer@{LSFServer}!listQueues@{listQueues}}
\index{listQueues@{listQueues}!LSFServer@{LSFServer}}
\subsubsection[{listQueues}]{\setlength{\rightskip}{0pt plus 5cm}TMS\_\-Data::ListQueues$\ast$ LSFServer::listQueues (
\begin{DoxyParamCaption}
\item[{const std::string \&}]{ optQueueName = {\ttfamily std::string()}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classLSFServer_a8dc6b7ad5db30b51fafdd3f40466324c}


Function to request the status of queues. 


\begin{DoxyParams}{Parameters}
\item[{\em optQueueName}](optional) the name of the queue to request \end{DoxyParams}
\begin{DoxyReturn}{Returns}
The requested status in to ListQueues data structure 
\end{DoxyReturn}


Implements \hyperlink{classBatchServer_ab5cb2d2073b50e7c1f81693baed942ea}{BatchServer}.

\hypertarget{classLSFServer_a2c772126004cc986ac63b9bc90c94889}{
\index{LSFServer@{LSFServer}!processOptions@{processOptions}}
\index{processOptions@{processOptions}!LSFServer@{LSFServer}}
\subsubsection[{processOptions}]{\setlength{\rightskip}{0pt plus 5cm}void LSFServer::processOptions (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{ scriptPath, }
\item[{const TMS\_\-Data::SubmitOptions \&}]{ options, }
\item[{struct submit $\ast$}]{ req}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classLSFServer_a2c772126004cc986ac63b9bc90c94889}


Function to treat the submission options. 


\begin{DoxyParams}{Parameters}
\item[{\em scriptPath}]The job script path \item[{\em options}]the object which contains the SubmitOptions options values \item[{\em req}]The LSF submit option structure to fill \end{DoxyParams}
\begin{DoxyReturn}{Returns}
raises an exception on error 
\end{DoxyReturn}
\hypertarget{classLSFServer_acd9e28377eeeef5b5bb89b4820ffcbbc}{
\index{LSFServer@{LSFServer}!replaceSymbolInToJobPath@{replaceSymbolInToJobPath}}
\index{replaceSymbolInToJobPath@{replaceSymbolInToJobPath}!LSFServer@{LSFServer}}
\subsubsection[{replaceSymbolInToJobPath}]{\setlength{\rightskip}{0pt plus 5cm}void LSFServer::replaceSymbolInToJobPath (
\begin{DoxyParamCaption}
\item[{std::string \&}]{ path}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classLSFServer_acd9e28377eeeef5b5bb89b4820ffcbbc}


Function to replace LSF job identifer symbol by its real value in to a path. 


\begin{DoxyParams}{Parameters}
\item[{\em path}]The path containing the job symbol \end{DoxyParams}
\hypertarget{classLSFServer_a2e8c4df4101e12dded11fa20faa994f1}{
\index{LSFServer@{LSFServer}!submit@{submit}}
\index{submit@{submit}!LSFServer@{LSFServer}}
\subsubsection[{submit}]{\setlength{\rightskip}{0pt plus 5cm}int LSFServer::submit (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{ scriptPath, }
\item[{const TMS\_\-Data::SubmitOptions \&}]{ options, }
\item[{TMS\_\-Data::Job \&}]{ job, }
\item[{char $\ast$$\ast$}]{ envp = {\ttfamily NULL}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classLSFServer_a2e8c4df4101e12dded11fa20faa994f1}


Function to submit LSF job. 


\begin{DoxyParams}{Parameters}
\item[{\em scriptPath}]the path to the script containing the job characteristique \item[{\em options}]the options to submit job \item[{\em job}]The job data structure \item[{\em envp}]The list of environment variables used by LSF submission function \end{DoxyParams}
\begin{DoxyReturn}{Returns}
raises an exception on error 
\end{DoxyReturn}


Implements \hyperlink{classBatchServer_a078c0f8605e770c02b8eca0351526f59}{BatchServer}.



The documentation for this class was generated from the following file:\begin{DoxyCompactItemize}
\item 
TMS/src/server/\hyperlink{LSFServer_8hpp}{LSFServer.hpp}\end{DoxyCompactItemize}
